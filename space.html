<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<title>たのしいあそびば </title>
<style>
canvas {background: #010101}
body {background: #777}
</style>
<script>

let tick = 0;
const framerate = 60;

window.addEventListener("keydown", ev_push_keydown);
window.addEventListener("click", ev_click);
window.addEventListener("mousemove", ev_momove);
let mox = 700;
let moy = 300;
let centx = 500;
let centy = 500;
let current_string = "Welcome to the world!";

function ev_momove(event) {
	document.getElementById("object").innerHTML = current_string;
	let canvas_ele = document.getElementById('mycanvas');
	let canvas_pos = canvas_ele.getBoundingClientRect();
	mox = event.clientX - canvas_pos.left;
	moy = event.clientY - canvas_pos.top;
	current_string = "Mouse coordinate = (" + mox + ", " + moy + ")";
	draw(mox,moy);
	document.getElementById("my-clock").innerHTML = "t = " + tick + "<br>";
}

window.setInterval(my_clock, 1000/framerate);
function my_clock() {
	tick++;
	document.getElementById("my-time").innerHTML = "t = " + tick + "<br>";
	draw(mox,moy);
}



function ev_click(event) {
	current_string = "clicked!";
	document.getElementById("object").innerHTML = current_string;
	centx = mox;
	centy = moy;
}

function ev_push_keydown(event){
	current_string += event.key;
	document.getElementById("object").innerHTML = current_string;
}
function draw(x, y) {
	let canvas_ele = document.getElementById('mycanvas');
	if (canvas_ele.getContext) {
		let ctx = canvas_ele.getContext('2d');
		ctx.clearRect(0, 0, canvas_ele.width, canvas_ele.height);
		ctx.fillStyle = 'rgb(200, 0, 0)';
		ctx.fillRect(x-10, y-10, 10, 10);

		ctx.fillStyle = 'rgb(0, 0, 200, 0.5)';
		ctx.fillRect(100 * Math.sin(6.2*tick) + mox, 100* Math.cos(6.2*tick) + moy, 50, 50);
	}
}
</script>
</head>
<body>
<center>
<canvas id="mycanvas" width="1500" height="700"></canvas>
<h1 id="object" class="text">Welcome to SPAAAAAAAAAAAAAACE!</h1>
<h2 id="my-clock">t = 0</h2>
<h2 id="my-time">t = 0</h2>
</center>
</body>
</html>









